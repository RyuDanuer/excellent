#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.expand_path(File.dirname(__FILE__) + "/../lib"))

require 'simplabs/excellent'
require 'pathname'

excellent = Simplabs::Excellent::Core::ParseTreeRunner.new

ARGV.each do |arg|
  Dir.glob(arg).each { |file| excellent.check_file(file) }
end

puts "\nExcellent found #{excellent.errors.size} errors.\n"
excellent.errors.each do |error|
  relative_path = Pathname.new(error.filename).relative_path_from(Pathname.new(File.dirname(__FILE__)))
  puts "  * File #{relative_path}, line #{error.line_number}: #{error.message}"
end
puts ''

exit 0
